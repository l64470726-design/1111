<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å°å°å†’é™©</title>
  <style>
    body {
      margin: 0;
      background: #0f172a;
      color: #fff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    #game, #videoPage {
      display: none;
    }

    canvas {
      background: #020617;
      border: 2px solid #38bdf8;
    }

    #hint {
      text-align: center;
      margin-top: 10px;
      color: #94a3b8;
      font-size: 14px;
    }

    #videoPage {
      text-align: center;
    }

    video {
      max-width: 90vw;
      max-height: 70vh;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(56,189,248,.4);
    }

    h1 {
      margin-bottom: 20px;
      font-weight: 500;
    }
  </style>
</head>
<body>

<div id="game">
  <canvas id="canvas" width="480" height="320"></canvas>
  <div id="hint">ä½¿ç”¨ â†‘ â†“ â† â†’ æ§åˆ¶å°äººï¼Œæ‹¿åˆ°é’¥åŒ™ï¼Œæ‰“å¼€é—¨</div>
</div>

<div id="videoPage">
  <h1>ğŸ‚ ç”Ÿæ—¥å¿«ä¹</h1>
  <video controls autoplay>
    <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
    ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
  </video>
</div>

<script>
  const game = document.getElementById("game");
  const videoPage = document.getElementById("videoPage");
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  game.style.display = "block";

  const player = { x: 40, y: 140, size: 20 };
  const key = { x: 220, y: 60, size: 14, got: false };
  const door = { x: 420, y: 130, width: 30, height: 60 };

  const speed = 5;
  const keysPressed = {};

  document.addEventListener("keydown", e => keysPressed[e.key] = true);
  document.addEventListener("keyup", e => keysPressed[e.key] = false);

  function collide(a, b) {
    return (
      a.x < b.x + b.size &&
      a.x + a.size > b.x &&
      a.y < b.y + b.size &&
      a.y + a.size > b.y
    );
  }

  function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    if (keysPressed["ArrowUp"]) player.y -= speed;
    if (keysPressed["ArrowDown"]) player.y += speed;
    if (keysPressed["ArrowLeft"]) player.x -= speed;
    if (keysPressed["ArrowRight"]) player.x += speed;

    player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));

    ctx.fillStyle = "#38bdf8";
    ctx.fillRect(player.x, player.y, player.size, player.size);

    if (!key.got) {
      ctx.fillStyle = "#facc15";
      ctx.fillRect(key.x, key.y, key.size, key.size);
      if (collide(player, key)) {
        key.got = true;
      }
    }

    ctx.fillStyle = key.got ? "#22c55e" : "#64748b";
    ctx.fillRect(door.x, door.y, door.width, door.height);

    if (
      key.got &&
      player.x + player.size > door.x &&
      player.y + player.size > door.y &&
      player.y < door.y + door.height
    ) {
      game.style.display = "none";
      videoPage.style.display = "block";
      return;
    }

    requestAnimationFrame(loop);
  }

  loop();
</script>

</body>
</html>
